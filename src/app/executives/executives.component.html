<div class="executive-infor-container">
  <div class="row">
    <div class="col">
      <h2>{{ executive?.email }}</h2>
      <p *ngIf="executive?.roles">Role: {{ executive?.roles[0].name }}</p>
    </div>
  </div>
</div>
<hr/>
<div class="tabs-container">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link active" href="#permissions-table" role="tab" data-toggle="tab">Permisos</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#permissions-container" role="tab" data-toggle="tab">Asignar</a>
    </li>
  </ul>
</div>

<div class="tab-content">
  <div class="permissions-table" role="tablpanel" class="tab-pane active" id="permissions-table">
    <div class="title">
      <div class="row">
        <div class="col col-lg-6 ">
          <h2>Tabla de permisos</h2>
        </div>
        <div class="col col-lg-2 offset-lg-4 text-right">
          <button type="button" class="btn btn-outline-secondary" (click)="reloadTableData()">
              <i class="fas fa-sync-alt"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="data-container">
      <div class="row">
        <div class="col col-lg-12">
          <table class="table table-bordered table-hover">
            <thead>
              <tr>
                <th>Tabla</th>
                <th>Campos</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let permission of permissions;">
                <td>{{ permission.table }}</td>
                <td>{{ permission.fields }}</td>
                <td class="text-center">
                    <i class="fas fa-trash" (click)="delete(permission.id)"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="permissions-container" role="tablpanel" class="tab-pane" id="permissions-container">
    <div class="row">
      <div class="col">
        <div class="title text-center">
          <h2>Asignaci√≥n de permisos</h2>
        </div>
      </div>
    </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="col col-lg-4 offset-lg-2">
          <div class="form-group">
            <select formControlName="table" #table class="form-control" id="select-tables" (change)="showTableFields(form.controls.table.value)">
              <option value="">Seleccione una tabla</option>
              <option *ngFor="let table of tables;" [value]="table.name">{{ table.name }}</option>
            </select>
          </div>
        </div>
        <div class="col col-lg-4">
          <div class="form-group">
            <select formControlName="fields" class="form-control" id="fields-table" multiple>
              <option value="">Seleccione los campos</option>
              <option *ngFor="let field of tableFields;" [value]="field">{{ field }}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="button-container">
            <button type="submit" class="btn btn-outline-primary" [disabled]="!form.valid">Asignar Permiso</button>
          </div>
        </div>
      </div>
    </form>
    <div class="row">
      <div class="col col-lg-8 offset-lg-2">
        <div class="message-container hidden" #msgcont>
          <div class="row">
            <div class="col col-lg-10">
              <div class="mesage">
                <p>{{ message }}</p>
              </div>
            </div>
            <div class="col col-lg-2">
              <div class="icon-message text-center">
                <i class="far" #msgicon ></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
